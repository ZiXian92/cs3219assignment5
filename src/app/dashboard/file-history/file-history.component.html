<template [ngIf]="!showVisualization">
    <div class="row">
        <div class="col-xs-12">
            <h5>Select a file</h5>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <file-select [fileTree]="fileTree" [(fileSelect)]="fileSelect"></file-select>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <button
                class="btn btn-outline-primary " 
                [class.active]="lineSelect.option"
                (click)="lineSelect.option = !lineSelect.option">
                Specify lines
            </button>
        </div>
    </div>
    <div class="row" *ngIf="lineSelect.option">
        <div class="col-xs-12">
            <form class="form-inline">
                <div class="form-group">
                    <label for="fromLine">From line</label>
                    <input type="number" class="form-control" name="fromLine" [(ngModel)]="lineSelect.fromLine" placeholder="0">
                </div>
                <div class="form-group">
                    <label for="toLine">to</label>
                    <input type="number" class="form-control" name="toLine" [(ngModel)]="lineSelect.toLine" placeholder="999">
                </div>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <button
                class="btn btn-outline-success" 
                (click)="showFileHistory()">
                Visualize
            </button>  
            <span *ngIf="showError">
                Please finish the setup first!
            </span>
        </div>
    </div>
</template>

<template [ngIf]="showVisualization">
    <button class="btn btn-secondary" (click)="goToSetup()">Back to setup</button>
    <div class="row visualization">
        <div class="file-changes-list col-xs-3">
            <div 
                *ngFor="let fileChanges of fileChangesList"
                [ngClass]="{'active': fileChanges === selectedFileChanges}"
                (click)="selectFileChange(fileChanges)"
                class="file-changes-data">
                <div class="row">
                    <md-icon>today</md-icon>
                    {{fileChanges.date}}
                </div>
                <div class="row message">
                    <md-icon>local_offer</md-icon>
                    {{fileChanges.message}}
                </div>
                <div class="row">
                    <md-icon>person</md-icon>
                    <span>{{fileChanges.author}}</span>
                    <span class="lines-edited">(+{{fileChanges.file.additions}}, -{{fileChanges.file.deletions}})</span>
                </div>
            </div>
        </div>
        <div class="col-xs-9">
            <file-changes [fileChanges]="filePatch"></file-changes>
        </div>
    </div>
</template>


